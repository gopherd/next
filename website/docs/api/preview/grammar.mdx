---
pagination_prev: null
pagination_next: null
---
# Grammar {#user-content-Grammar}

`Grammar` represents the custom grammar for the next files.

The grammar is used to define a subset of the next files. It can limit the features of the next code according by your requirements. The grammar is a JSON object that contains rules.

###### .default {#user-content-Grammar__default}
<div className="property-container">

`.default` represents the default grammar for the next files.

:::tip

Run the following command to generate the default grammar:

```sh
next grammar grammar.json
```

You can use this grammar as a starting point for your own grammar.

:::

</div>

## Common {#user-content-Grammar_Common}
### Annotation {#user-content-Grammar_Common_Annotation}

`Annotation` represents the annotation grammar rules. Only the built-in annotations are supported if no annotations are defined in the grammar.

Example:

```json
{
  "Struct": {
    "Annotations": [
      {
        "Name": "message",
        "Description": "Sets the struct as a message.",
        "Parameters": [
          {
            "Name": "type",
            "Description": "Sets the message type id.",
            "Type": "int",
            "Required": true
            "Validators": [
              {
                "Name": "MessageTypeMustBePositive",
                "Expression": "{{gt . 0}}",
                "Message": "message type must be positive"
              }
            ]
          }
        ]
      }
    ]
  }
}
```

```next
package demo;

// Good
@message(type=1)
struct User {
  int id;
  string name;
}

// This will error
@message
struct User {
  int id;
  string name;
}
// Error: message type is required

// This will error
@message(type)
struct User {
  int id;
  string name;
}
// Error: message type must be an integer

// This will error
@message(type=-1)
struct User {
  int id;
  string name;
}
// Error: message type must be positive
```

###### .Description {#user-content-Grammar_Common_Annotation__Description}
<div className="property-container">

`.Description` represents the annotation description.

</div>

###### .Name {#user-content-Grammar_Common_Annotation__Name}
<div className="property-container">

`.Name` represents the annotation name.

</div>

###### .Parameters {#user-content-Grammar_Common_Annotation__Parameters}
<div className="property-container">

`.Parameters` represents the annotation parameters.

</div>

### AnnotationParameter {#user-content-Grammar_Common_AnnotationParameter}

`AnnotationParameter` represents the annotation parameter grammar rules. If no parameters are defined, the annotation does not have any parameters.

###### .Description {#user-content-Grammar_Common_AnnotationParameter__Description}
<div className="property-container">

`.Description` represents the parameter description.

</div>

###### .Name {#user-content-Grammar_Common_AnnotationParameter__Name}
<div className="property-container">

`.Name` represents the parameter name pattern. The name pattern is a regular expression that can be used to match the annotation parameter name.

Example:

- "**type**": matches the annotation name `type`
- "**x|y**": matches the annotation name `x` or `y`
- "**.+_package**": matches the annotation name that ends with `_package`, for example, `cpp_package`, `java_package`, etc.

</div>

###### .Required {#user-content-Grammar_Common_AnnotationParameter__Required}
<div className="property-container">

`.Required` represents the parameter is required or not.

</div>

###### .Type {#user-content-Grammar_Common_AnnotationParameter__Type}
<div className="property-container">

`.Type` represents the parameter type. The type is a string that can be one of the following types:

- **bool**: boolean type, the value can be `true` or `false`
- **int**: integer type, the value can be a positive or negative integer, for example, `123`
- **float**: float type, the value can be a positive or negative float, for example, `1.23`
- **string**: string type, the value can be a string, for example, `"hello"`
- **type**: any type name, for example, `int`, `float`, `string`, etc. Custom type names are supported.

</div>

###### .Validators {#user-content-Grammar_Common_AnnotationParameter__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the annotation parameter.

</div>

### Validator {#user-content-Grammar_Common_Validator}

`Validator` represents the validator for the grammar rules.

###### .Expression {#user-content-Grammar_Common_Validator__Expression}
<div className="property-container">

`.Expression` represents the validator expression. The expression is a template string that can access the data by the `.` operator. The expression must return a boolean value.

The data is the current context object. For example, **package** object for the package validator.

</div>

###### .Message {#user-content-Grammar_Common_Validator__Message}
<div className="property-container">

`.Message` represents the error message when the validator is failed.

</div>

###### .Name {#user-content-Grammar_Common_Validator__Name}
<div className="property-container">

`.Name` represents the validator name.

</div>

## Const {#user-content-Grammar_Const}

`Const` represents the grammar rules for the const declaration.

###### .Annotations {#user-content-Grammar_Const__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the const declaration.

</div>

###### .Off {#user-content-Grammar_Const__Off}
<div className="property-container">

`.Off` represents the const declaration is off or not. If the const declaration is off, the const declaration is not allowed in the next files.

Example:

```json
{
  "Const": {
    "Off": true
  }
}
```

```next
package demo;

// This will error
const x = 1;
// Error: const declaration is not allowed
```

</div>

###### .Types {#user-content-Grammar_Const__Types}
<div className="property-container">

`.Types` represents a list of type names that are supported in the const declaration. If no types are defined, the const declaration supports all types. Otherwise, the const declaration only supports the specified types.

Currently, each type name can be one of the following types:

- **bool**: boolean type, the value can be `true` or `false`
- **int**: integer type, the value can be a positive or negative integer, for example, `123`
- **float**: float type, the value can be a positive or negative float, for example, `1.23`
- **string**: string type, the value can be a string, for example, `"hello"`

Example:

```json
{
  "Const": {
    "Types": ["int", "float"]
  }
}
```

```next
package demo;

const x = 1; // Good
const y = 1.23; // Good

// This will error
const z = "hello";
// Error: string type is not allowed in the const declaration
```

</div>

###### .Validators {#user-content-Grammar_Const__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the const declaration. It's used to validate the const name. You can access the const name by `.Name`.

Example:

```json
{
  "Const": {
    "Validators": [
      {
        "Name": "ConstNameMustBeCapitalized",
        "Expression": "{{eq .Name (.Name | capitalize)}}",
        "Message": "const name must be capitalized"
      }
    ]
  }
}
```

```next
package demo;

const Hello = 1; // Good

// This will error
const world = 1;
// Error: const name must be capitalized, expected: World
```

</div>

## Enum {#user-content-Grammar_Enum}

`Enum` represents the grammar rules for the enum declaration.

###### .Annotations {#user-content-Grammar_Enum__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the enum declaration.

</div>

###### .Member {#user-content-Grammar_Enum__Member}
<div className="property-container">

`.Member` represents the [EnumMember](#user-content-Grammar_EnumMember) grammar rules for the enum declaration.

</div>

###### .Off {#user-content-Grammar_Enum__Off}
<div className="property-container">

`.Off` represents the enum declaration is off or not. If the enum declaration is off, the enum declaration is not allowed in the next files.

Example:

```json
{
  "Enum": {
    "Off": true
  }
}
```

```next
package demo;

// This will error
enum Color {
  Red;
  Green;
  Blue;
}
// Error: enum declaration is not allowed
```

</div>

###### .Validators {#user-content-Grammar_Enum__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the enum declaration. It's used to validate the enum name. You can access the enum name by `.Name`.

Example:

```json
{
  "Enum": {
    "Validators": [
      {
        "Name": "EnumNameMustBeCapitalized",
        "Expression": "{{eq .Name (.Name | capitalize)}}",
        "Message": "enum name must be capitalized"
      }
    ]
  }
}
```

```next
package demo;

// Good
enum Color {
  Red;
  Green;
  Blue;
}

// This will error
enum size {
  Small;
  Medium;
  Large;
}
// Error: enum name must be capitalized, expected: Size
```

</div>

## EnumMember {#user-content-Grammar_EnumMember}

`EnumMember` represents the grammar rules for the enum member declaration.

###### .Annotations {#user-content-Grammar_EnumMember__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the enum member declaration.

</div>

###### .Types {#user-content-Grammar_EnumMember__Types}
<div className="property-container">

`.Types` represents a list of type names that are supported in the enum declaration.

If no types are defined, the enum declaration supports all types. Otherwise, the enum declaration only supports the specified types.

Currently, each type name can be one of the following types:

- **int**: integer type, the value can be a positive or negative integer, for example, `123`
- **float**: float type, the value can be a positive or negative float, for example, `1.23`
- **string**: string type, the value can be a string, for example, `"hello"`

Example:

```json
{
  "Enum": {
    "Member": {
      "Types": ["int"]
    }
  }
}
```

```next
package demo;

// Good
enum Color {
  Red = 1,
  Green = 2,
  Blue = 3
}

// This will error
enum Size {
  Small = "small",
  Medium = "medium",
  Large = "large"
}
// Error: string type is not allowed in the enum declaration
```

</div>

###### .Validators {#user-content-Grammar_EnumMember__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the enum member declaration.

It's used to validate the enum member name. You can access the enum member name by `.Name`.

Example:

```json
{
  "Enum": {
    "Member": {
      "Validators": [
        {
          "Name": "EnumMemberNameMustBeCapitalized",
          "Expression": "{{eq .Name (.Name | capitalize)}}",
          "Message": "enum member name must be capitalized"
        }
      ]
    }
  }
}
```

```next
package demo;

enum Size {
  Small = 1,
  Medium = 2,
  // This will error
  large = 3;
  // Error: enum member name must be capitalized, expected: Large
}
```

</div>

###### .ValueRequired {#user-content-Grammar_EnumMember__ValueRequired}
<div className="property-container">

`.ValueRequired` represents the enum member value is required or not. If the enum member value is required, the enum member value must be specified in the next files.

Example:

```json
{
  "Enum": {
    "Member": {
      "ValueRequired": true
    }
  }
}
```

```next
package demo;

enum Size {
  Small = 1,
  Medium = 2;
  // This will error
  Large;
  // Error: enum member value is required
}
```

</div>

###### .ZeroRequired {#user-content-Grammar_EnumMember__ZeroRequired}
<div className="property-container">

`.ZeroRequired` represents the enum member zero value for integer types is required or not.

If the enum member zero value is required, the enum member zero value must be specified in the next files.

Example:

```json
{
  "Enum": {
    "Member": {
      "ZeroRequired": true
    }
  }
}
```

```next
package demo;

// This will error
enum Size {
  Small = 1,
  Medium = 2,
  Large = 3;
}
// Error: enum member zero value is required, for example:
// enum Size {
//   Small = 0,
//   Medium = 1,
//   Large = 2
// }
```

</div>

## Import {#user-content-Grammar_Import}

`Import` represents the grammar rules for the import declaration.

###### .Off {#user-content-Grammar_Import__Off}
<div className="property-container">

`.Off` represents the import declaration is off or not. If the import declaration is off, the import declaration is not allowed in the next files.

Example:

```json
{
  "Import": {
    "Off": true
  }
}
```

```next
package demo;

// This will error
import "other.next";
// Error: import declaration is not allowed
```

</div>

## Interface {#user-content-Grammar_Interface}

`Interface` represents the grammar rules for the interface declaration.

###### .Annotations {#user-content-Grammar_Interface__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the interface declaration.

</div>

###### .Method {#user-content-Grammar_Interface__Method}
<div className="property-container">

`.Method` represents the [InterfaceMethod](#user-content-Grammar_InterfaceMethod) grammar rules for the interface declaration.

</div>

###### .Off {#user-content-Grammar_Interface__Off}
<div className="property-container">

`.Off` represents the interface declaration is off or not. If the interface declaration is off, the interface declaration is not allowed in the next files.

Example:

```json
{
  "Interface": {
    "Off": true
  }
}
```

```next
package demo;

// This will error
interface User {
  GetID() int;
}
// Error: interface declaration is not allowed
```

</div>

###### .Validators {#user-content-Grammar_Interface__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the interface declaration. It's used to validate the interface name. You can access the interface name by `.Name`.

Example:

```json
{
  "Interface": {
    "Validators": [
      {
        "Name": "InterfaceNameMustBeCapitalized",
        "Expression": "{{eq .Name (.Name | capitalize)}}",
        "Message": "interface name must be capitalized"
      }
    ]
  }
}
```

```next
package demo;

// Good
interface User {
  GetID() int;
}

// This will error
interface user {
  GetName() string;
}
// Error: interface name must be capitalized, expected: User
```

</div>

## InterfaceMethod {#user-content-Grammar_InterfaceMethod}

`InterfaceMethod` represents the grammar rules for the interface method declaration.

Example:

```json
{
  "Interface": {
    "Method": {
      "Annotations": [
        {
          "Name": "http",
          "Description": "Sets the method as an HTTP handler.",
          "Parameters": [
            {
              "Name": "method",
              "Description": "Sets the HTTP method.",
              "Type": "string",
              "Required": true
              "Validators": [
                {
                  "Name": "HTTPMethodMustBeValid",
                  "Expression": "{{includes (list `GET` `POST` `PUT` `DELETE` `PATCH` `HEAD` `OPTIONS` `TRACE` `CONNECT`) .}}",
                  "Message": "http method must be valid"
                }
              ]
            }
          ]
        }
      ],
      "Validators": [
        {
          "Name": "MethodNameMustBeCapitalized",
          "Expression": "{{eq .Name (.Name | capitalize)}}",
          "Message": "method name must be capitalized"
        }
      ]
    }
  }
}
```

###### .Annotations {#user-content-Grammar_InterfaceMethod__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the interface method declaration.

</div>

###### .Validators {#user-content-Grammar_InterfaceMethod__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the interface method declaration.

</div>

### Parameter {#user-content-Grammar_InterfaceMethod_Parameter}

`Parameter` represents the grammar rules for the interface method parameter declaration.

###### .Annotations {#user-content-Grammar_InterfaceMethod_Parameter__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the interface method parameter declaration.

</div>

###### .Validators {#user-content-Grammar_InterfaceMethod_Parameter__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the interface method parameter declaration.

</div>

## Package {#user-content-Grammar_Package}

`Package` represents the grammar rules for the package declaration.

###### .Annotations {#user-content-Grammar_Package__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the package declaration.

</div>

###### .Validators {#user-content-Grammar_Package__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the package declaration. It's used to validate the package name. For example, You can limit the package name must be not start with a "_" character. The validator expression is a template string that can access package name by `.Name`.

Example:

```json
{
  "Package": {
    "Validators": [
      {
        "Name": "PackageNameNotStartWithUnderscore",
        "Expression": "{{not (hasPrefix `_` .Name)}}",
        "Message": "package name must not start with an underscore"
      }
    ]
  }
}
```

```next
// This will error
package _test;
// Error: package name must not start with an underscore
```

</div>

## Struct {#user-content-Grammar_Struct}

`Struct` represents the grammar rules for the struct declaration.

###### .Annotations {#user-content-Grammar_Struct__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the struct declaration.

</div>

###### .Field {#user-content-Grammar_Struct__Field}
<div className="property-container">

`.Field` represents the [StructField](#user-content-Grammar_StructField) grammar rules for the struct declaration.

</div>

###### .Off {#user-content-Grammar_Struct__Off}
<div className="property-container">

`.Off` represents the struct declaration is off or not. If the struct declaration is off, the struct declaration is not allowed in the next files.

Example:

```json
{
  "Struct": {
    "Off": true
  }
}
```

```next
package demo;

// This will error
struct User {
  ID int;
  Name string;
}
// Error: struct declaration is not allowed
```

</div>

###### .Validators {#user-content-Grammar_Struct__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the struct declaration. It's used to validate the struct name. You can access the struct name by `.Name`.

Example:

```json
{
  "Struct": {
    "Validators": [
      {
        "Name": "StructNameMustBeCapitalized",
        "Expression": "{{eq .Name (.Name | capitalize)}}",
        "Message": "struct name must be capitalized"
      }
    ]
  }
}
```

```next
package demo;

// Good
struct User {
  int id;
  string name;
}

// This will error
struct point {
  int x;
  int y;
}
// Error: struct name must be capitalized, expected: Point
```

</div>

## StructField {#user-content-Grammar_StructField}

`StructField` represents the grammar rules for the struct field declaration.

###### .Annotations {#user-content-Grammar_StructField__Annotations}
<div className="property-container">

`.Annotations` represents the [Annotation](#user-content-Grammar_Common_Annotation) grammar rules for the struct field declaration.

</div>

###### .Validators {#user-content-Grammar_StructField__Validators}
<div className="property-container">

`.Validators` represents the [Validator](#user-content-Grammar_Common_Validator) for the struct field declaration. It's used to validate the struct field name. You can access the struct field name by `.Name`.

Example:

```json
{
  "Struct": {
    "Field": {
      "Validators": [
        {
          "Name": "StructFieldNameMustNotBeCapitalized",
          "Expression": "{{ne .Name (capitalize .Name)}}",
          "Message": "struct field name must not be capitalized"
        }
      ]
    }
  }
}
```

```next
package demo;

struct User {
  int id;
  // This will error
  string Name;
  // Error: struct field name must not be capitalized, expected: name
}
```

</div>

