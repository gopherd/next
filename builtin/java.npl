{{- define "next/java/file" -}}
package {{render "java/package.name" .Package}};

{{next .Imports -}}
{{next .Decls -}}
{{- end}}

{{- define "next/java/imports" -}}
import java.util.List;
import java.util.Map;
import java.util.Arrays;
{{if .TrimmedList}}
{{range .TrimmedList}}
{{next . -}}
{{- end}}
{{- end}}
{{- end}}

{{- define "next/java/doc" -}}
{{.Format "" " * " "/**\n" " */" | align}}
{{- end}}

{{- define "next/java/package.name" -}}
{{.Annotations.next.java_package}}
{{- end}}

{{- define "next/java/import" -}}
import {{render "java/package.name" .File.Package}}.*;
{{- end}}

{{- define "next/java/consts" -}}
public class Constants {
    {{- range .List}}
    {{next . -}}
    {{- end}}
}
{{- end}}

{{- define "next/java/const" -}}
{{next .Doc}}public static final {{next .Type}} {{.Name | upper}} = {{.Value}}{{if eq "long" ((next .Type))}}l{{end}};{{next .Comment}}
{{- end}}

{{- define "next/java/enums" -}}
{{- range .List}}
{{next . -}}

{{- end}}
{{- end}}

{{- define "next/java/enum" -}}
{{next .Doc}}public enum {{.Name}} {
    {{- next .Members}}

    private final {{render "java/enum:value_type" .}} value;

    {{.Name}}({{render "java/enum:value_type" .}} value) {
        this.value = value;
    }

    public {{render "java/enum:value_type" .}} getValue() {
        return value;
    }
}
{{- end}}

{{- define "next/java/enum:value_type" -}}
{{if .Annotations.next.type}}{{next .Annotations.next.type}}{{else}}int{{end}}
{{- end}}

{{- define "next/java/enum.member" -}}
{{next .Doc}}{{.Name}}(({{render "java/enum:value_type" .Decl}}) {{.Value}}){{if not .IsLast}},{{else}};{{end}}{{next .Comment}}
{{- end}}

{{- define "next/java/struct" -}}
{{next .Doc}}public class {{.Name}} {
    {{- next .Fields}}

    public {{.Name}}() {}
}
{{- end}}

{{- define "next/java/struct.field" -}}
{{- $type := (next .Type)}}
{{- $name := (next .Name)}}
    {{next .Doc}}private {{$type}} {{$name}};{{next .Comment}}

    public {{$type}} get{{$name | capitalize}}() {
        return {{$name}};
    }

    public void set{{$name | capitalize}}({{$type}} {{$name}}) {
        this.{{$name}} = {{$name}};
    }
{{- end}}

{{- define "next/java/struct.field.name" -}}
{{.}}
{{- end}}

{{- define "next/java/interface.method" -}}
{{next .Doc}}{{next .Return}} {{next .Name}}({{next .Params}}){{if .Annotations.next.error}} throws Exception{{end}};{{next .Comment}}
{{- end}}

{{- define "next/java/interface.method.return" -}}
{{if .Type}}{{next .Type}}{{else}}void{{end}}
{{- end}}

{{- define "next/java/type:alias" -}}
{{- .Decl.Annotations.next.java_alias -}}
{{- end}}